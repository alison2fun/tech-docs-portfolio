name: CI

on: [push, pull_request]

jobs:
  prose:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # 修正点：使用正确的官方 Action，并开启报错拦截
      - name: Vale
        uses: errata-ai/vale-action@v2
        with:
          # 关键参数：发现错误时让流水线变红（默认是只报告不报错）
          fail_on_error: true 
          # 告诉它检查所有文件
          files: '.'